package link.thingscloud.freeswitch.cdr.parser;

import com.alibaba.fastjson.JSON;
import link.thingscloud.freeswitch.cdr.domain.Cdr;
import link.thingscloud.freeswitch.cdr.exception.ParserException;
import lombok.extern.slf4j.Slf4j;
import org.junit.Test;

/**
 * <p>CdrParserTest class.</p>
 *
 * @author : <a href="mailto:ant.zhou@aliyun.com">zhouhailin</a>
 * @version $Id: $Id
 * @since 0.0.1
 */

@Slf4j
public class CdrParserTest {
    private String encodeStr = "uuid=a_2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0&cdr=%3C%3Fxml+version%3D%221.0%22%3F%3E%0A%3Ccdr+core-uuid%3D%2221483469-cecc-4e5f-a9eb-0402e56193aa%22%3E%0A++%3Cchannel_data%3E%0A++++%3Cstate%3ECS_REPORTING%3C%2Fstate%3E%0A++++%3Cdirection%3Einbound%3C%2Fdirection%3E%0A++++%3Cstate_number%3E11%3C%2Fstate_number%3E%0A++++%3Cflags%3E0%3D1%3B3%3D1%3B36%3D1%3B37%3D1%3B39%3D1%3B52%3D1%3B73%3D1%3B110%3D1%3B111%3D1%3B115%3D1%3B117%3D1%3C%2Fflags%3E%0A++++%3Ccaps%3E1%3D1%3B2%3D1%3B3%3D1%3B4%3D1%3B5%3D1%3B6%3D1%3C%2Fcaps%3E%0A++%3C%2Fchannel_data%3E%0A++%3Cvariables%3E%0A++++%3Cdirection%3Einbound%3C%2Fdirection%3E%0A++++%3Cuuid%3E2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0%3C%2Fuuid%3E%0A++++%3Csession_id%3E274%3C%2Fsession_id%3E%0A++++%3Csip_from_user%3Eanonymous%3C%2Fsip_from_user%3E%0A++++%3Csip_from_uri%3Eanonymous%2540wilcom.com.cn%3C%2Fsip_from_uri%3E%0A++++%3Csip_from_host%3Ewilcom.com.cn%3C%2Fsip_from_host%3E%0A++++%3Cchannel_name%3Esofia%2Finternal%2Fanonymous%2540wilcom.com.cn%3C%2Fchannel_name%3E%0A++++%3Csip_call_id%3E2a13febe8cb541e98d6b0c29e8ce73%3C%2Fsip_call_id%3E%0A++++%3Cep_codec_string%3EPCMU%25408000h%254020i%254064000b%2CPCMA%25408000h%254020i%254064000b%3C%2Fep_codec_string%3E%0A++++%3Csip_local_network_addr%3E172.16.2.253%3C%2Fsip_local_network_addr%3E%0A++++%3Csip_network_ip%3E172.16.0.20%3C%2Fsip_network_ip%3E%0A++++%3Csip_network_port%3E21180%3C%2Fsip_network_port%3E%0A++++%3Csip_received_ip%3E172.16.0.20%3C%2Fsip_received_ip%3E%0A++++%3Csip_received_port%3E21180%3C%2Fsip_received_port%3E%0A++++%3Csip_via_protocol%3Etcp%3C%2Fsip_via_protocol%3E%0A++++%3Csip_authorized%3Etrue%3C%2Fsip_authorized%3E%0A++++%3Csip_acl_authed_by%3Edomains%3C%2Fsip_acl_authed_by%3E%0A++++%3Csip_from_user_stripped%3Eanonymous%3C%2Fsip_from_user_stripped%3E%0A++++%3Csip_from_tag%3E2a13fe968cb541e98d6a0c29e8ce73%3C%2Fsip_from_tag%3E%0A++++%3Csofia_profile_name%3Einternal%3C%2Fsofia_profile_name%3E%0A++++%3Crecovery_profile_name%3Einternal%3C%2Frecovery_profile_name%3E%0A++++%3Csip_cid_type%3Epid%3C%2Fsip_cid_type%3E%0A++++%3Csip_full_route%3E%253Csip%253A172.16.2.253%253A6060%253Btransport%253Dtcp%253Blr%253Bphase%253Dterminating%253E%3C%2Fsip_full_route%3E%0A++++%3Csip_invite_record_route%3E%253Csip%253A172.16.0.20%253Btransport%253Dtcp%253Blr%253E%3C%2Fsip_invite_record_route%3E%0A++++%3Csip_full_via%3ESIP%2F2.0%2FTCP%2520172.16.0.20%253Bbranch%253Dz9hG4bK2a143c88cb541e98d6c0c29e8ce73%253Brport%253D21180%2CSIP%2F2.0%2FTCP%2520172.16.0.169%253Bbranch%253Dz9hG4bK2a143c88cb541e98d6c0c29e8ce73%3C%2Fsip_full_via%3E%0A++++%3Csip_recover_via%3ESIP%2F2.0%2FTCP%2520172.16.0.20%253Bbranch%253Dz9hG4bK2a143c88cb541e98d6c0c29e8ce73%253Brport%253D21180%2CSIP%2F2.0%2FTCP%2520172.16.0.169%253Bbranch%253Dz9hG4bK2a143c88cb541e98d6c0c29e8ce73%3C%2Fsip_recover_via%3E%0A++++%3Csip_from_display%3EGong%2Cbaicheng%3C%2Fsip_from_display%3E%0A++++%3Csip_full_from%3E%2522Gong%2Cbaicheng%2522%2520%253Csip%253Aanonymous%2540wilcom.com.cn%253E%253Btag%253D2a13fe968cb541e98d6a0c29e8ce73%3C%2Fsip_full_from%3E%0A++++%3Csip_full_to%3E%253Csip%253A7010%2540172.16.2.253%253E%3C%2Fsip_full_to%3E%0A++++%3Csip_req_user%3E7010%3C%2Fsip_req_user%3E%0A++++%3Csip_req_uri%3E7010%2540172.16.2.253%3C%2Fsip_req_uri%3E%0A++++%3Csip_req_host%3E172.16.2.253%3C%2Fsip_req_host%3E%0A++++%3Csip_to_user%3E7010%3C%2Fsip_to_user%3E%0A++++%3Csip_to_uri%3E7010%2540172.16.2.253%3C%2Fsip_to_uri%3E%0A++++%3Csip_to_host%3E172.16.2.253%3C%2Fsip_to_host%3E%0A++++%3Csip_contact_params%3Etransport%253Dtcp%3C%2Fsip_contact_params%3E%0A++++%3Csip_contact_user%3Enobody%3C%2Fsip_contact_user%3E%0A++++%3Csip_contact_uri%3Enobody%2540172.16.0.20%3C%2Fsip_contact_uri%3E%0A++++%3Csip_contact_host%3E172.16.0.20%3C%2Fsip_contact_host%3E%0A++++%3Csip_user_agent%3EAvaya%2520CM%2FR017x.01.0.532.0%3C%2Fsip_user_agent%3E%0A++++%3Csip_via_host%3E172.16.0.20%3C%2Fsip_via_host%3E%0A++++%3Csip_via_rport%3E21180%3C%2Fsip_via_rport%3E%0A++++%3Calert_info%3E%253Ccid%253Ainternal%2540invalid.unknown.domain%253E%253Bavaya-cm-alert-type%253Dinternal%3C%2Falert_info%3E%0A++++%3Cpresence_id%3Eanonymous%2540wilcom.com.cn%3C%2Fpresence_id%3E%0A++++%3Csip_Privacy%3Eid%3C%2Fsip_Privacy%3E%0A++++%3Csip_history_info%3E%253Csip%253A7010%2540172.16.2.253%253E%253Bindex%253D1%2C%2520%25227010%2522%2520%253Csip%253A7010%2540172.16.2.253%253E%253Bindex%253D1.1%3C%2Fsip_history_info%3E%0A++++%3Csip_h_User-to-User%3E00FA08006401B65D005B91%253Bencoding%253Dhex%3C%2Fsip_h_User-to-User%3E%0A++++%3Cswitch_r_sdp%3Ev%253D0%250D%250Ao%253D-%25201560304533%25201%2520IN%2520IP4%2520172.16.0.20%250D%250As%253D-%250D%250Ac%253DIN%2520IP4%2520172.16.0.14%250D%250Ab%253DAS%253A64%250D%250At%253D0%25200%250D%250Aa%253Davf%253Aavc%253Dn%2520prio%253Dn%250D%250Aa%253Dcsup%253Aavf-v0%250D%250Am%253Daudio%25204780%2520RTP%2FAVP%25200%252018%25208%2520127%250D%250Aa%253Dfmtp%253A18%2520annexb%253Dno%250D%250Aa%253Drtpmap%253A127%2520telephone-event%2F8000%250D%250A%3C%2Fswitch_r_sdp%3E%0A++++%3CRECORD_STEREO%3Etrue%3C%2FRECORD_STEREO%3E%0A++++%3Crtp_use_codec_string%3EOPUS%2CG722%2CPCMU%2CPCMA%2CGSM%3C%2Frtp_use_codec_string%3E%0A++++%3Crtp_audio_recv_pt%3E0%3C%2Frtp_audio_recv_pt%3E%0A++++%3Crtp_use_codec_name%3EPCMU%3C%2Frtp_use_codec_name%3E%0A++++%3Crtp_use_codec_rate%3E8000%3C%2Frtp_use_codec_rate%3E%0A++++%3Crtp_use_codec_ptime%3E20%3C%2Frtp_use_codec_ptime%3E%0A++++%3Crtp_last_audio_codec_string%3EPCMU%25408000h%254020i%3C%2Frtp_last_audio_codec_string%3E%0A++++%3Cread_codec%3EPCMU%3C%2Fread_codec%3E%0A++++%3Coriginal_read_codec%3EPCMU%3C%2Foriginal_read_codec%3E%0A++++%3Cread_rate%3E8000%3C%2Fread_rate%3E%0A++++%3Coriginal_read_rate%3E8000%3C%2Foriginal_read_rate%3E%0A++++%3Cwrite_codec%3EPCMU%3C%2Fwrite_codec%3E%0A++++%3Cwrite_rate%3E8000%3C%2Fwrite_rate%3E%0A++++%3Cdtmf_type%3Erfc2833%3C%2Fdtmf_type%3E%0A++++%3Clocal_media_ip%3E172.16.2.253%3C%2Flocal_media_ip%3E%0A++++%3Clocal_media_port%3E24376%3C%2Flocal_media_port%3E%0A++++%3Cadvertised_media_ip%3E172.16.2.253%3C%2Fadvertised_media_ip%3E%0A++++%3Crtp_use_pt%3E0%3C%2Frtp_use_pt%3E%0A++++%3Crtp_use_ssrc%3E3775147797%3C%2Frtp_use_ssrc%3E%0A++++%3Crtp_2833_send_payload%3E127%3C%2Frtp_2833_send_payload%3E%0A++++%3Crtp_2833_recv_payload%3E127%3C%2Frtp_2833_recv_payload%3E%0A++++%3Cremote_media_ip%3E172.16.0.14%3C%2Fremote_media_ip%3E%0A++++%3Cremote_media_port%3E4780%3C%2Fremote_media_port%3E%0A++++%3Cendpoint_disposition%3EEARLY%2520MEDIA%3C%2Fendpoint_disposition%3E%0A++++%3Crtp_local_sdp_str%3Ev%253D0%250Ao%253DFreeSWITCH%25201560279613%25201560279614%2520IN%2520IP4%2520172.16.2.253%250As%253DFreeSWITCH%250Ac%253DIN%2520IP4%2520172.16.2.253%250At%253D0%25200%250Am%253Daudio%252024376%2520RTP%2FAVP%25200%2520127%250Aa%253Drtpmap%253A0%2520PCMU%2F8000%250Aa%253Drtpmap%253A127%2520telephone-event%2F8000%250Aa%253Dfmtp%253A127%25200-16%250Aa%253Dptime%253A20%250Aa%253Dsendrecv%250A%3C%2Frtp_local_sdp_str%3E%0A++++%3Cmax_forwards%3E69%3C%2Fmax_forwards%3E%0A++++%3Ctransfer_history%3E1560303989%253A40d041fb-cb63-462e-9c10-650c5e1eb564%253Abl_xfer%253A915121007938%2Fdefault%2Fxml%3C%2Ftransfer_history%3E%0A++++%3Ctransfer_source%3E1560303989%253A40d041fb-cb63-462e-9c10-650c5e1eb564%253Abl_xfer%253A915121007938%2Fdefault%2Fxml%3C%2Ftransfer_source%3E%0A++++%3CDP_MATCH%3E915121007938%3C%2FDP_MATCH%3E%0A++++%3CDP_MATCH%3E915121007938%3C%2FDP_MATCH%3E%0A++++%3Ccall_uuid%3E2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0%3C%2Fcall_uuid%3E%0A++++%3Ccallee%3E915121007938%3C%2Fcallee%3E%0A++++%3Csip_h_caller%3Eanonymous%3C%2Fsip_h_caller%3E%0A++++%3Csip_h_callee%3E915121007938%3C%2Fsip_h_callee%3E%0A++++%3Csip_h_ocallId%3E2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0%3C%2Fsip_h_ocallId%3E%0A++++%3Cda%3Etrue%3C%2Fda%3E%0A++++%3Ceffective_caller_id_number%3Eanonymous%3C%2Feffective_caller_id_number%3E%0A++++%3CcallerDomain%3Ewilcom.com.cn%3C%2FcallerDomain%3E%0A++++%3Cexport_vars%3Ecallee%2Ccallee%2Csip_h_caller%2Csip_h_callee%2Csip_h_ocallId%2Cda%2CcallerDomain%3C%2Fexport_vars%3E%0A++++%3Ccall_timeout%3E60%3C%2Fcall_timeout%3E%0A++++%3Cgateway%3Eavaya%3C%2Fgateway%3E%0A++++%3Crecord_rate%3E8000%3C%2Frecord_rate%3E%0A++++%3Crecord_sample_rate%3E8000%3C%2Frecord_sample_rate%3E%0A++++%3Crecording_follow_transfer%3Etrue%3C%2Frecording_follow_transfer%3E%0A++++%3Crecord_append%3Etrue%3C%2Frecord_append%3E%0A++++%3Ccurrent_application_data%3Esofia%2Fgateway%2Favaya%2F915121007938%3C%2Fcurrent_application_data%3E%0A++++%3Ccurrent_application%3Ebridge%3C%2Fcurrent_application%3E%0A++++%3Cinherit_codec%3Etrue%3C%2Finherit_codec%3E%0A++++%3Coriginate_signal_bond%3E49c3f50e-2aa1-4ce9-961f-38b85413a72e%3C%2Foriginate_signal_bond%3E%0A++++%3Coriginated_legs%3E49c3f50e-2aa1-4ce9-961f-38b85413a72e%253BOutbound%2520Call%253B915121007938%3C%2Foriginated_legs%3E%0A++++%3Csip_hangup_disposition%3Erecv_cancel%3C%2Fsip_hangup_disposition%3E%0A++++%3Csip_term_status%3E487%3C%2Fsip_term_status%3E%0A++++%3Cproto_specific_hangup_cause%3Esip%253A487%3C%2Fproto_specific_hangup_cause%3E%0A++++%3Csip_term_cause%3E487%3C%2Fsip_term_cause%3E%0A++++%3Coriginate_disposition%3EORIGINATOR_CANCEL%3C%2Foriginate_disposition%3E%0A++++%3CDIALSTATUS%3ECANCEL%3C%2FDIALSTATUS%3E%0A++++%3Coriginate_causes%3E49c3f50e-2aa1-4ce9-961f-38b85413a72e%253BORIGINATOR_CANCEL%3C%2Foriginate_causes%3E%0A++++%3Crecord_seconds%3E1%3C%2Frecord_seconds%3E%0A++++%3Crecord_ms%3E1560%3C%2Frecord_ms%3E%0A++++%3Crecord_samples%3E12480%3C%2Frecord_samples%3E%0A++++%3Changup_cause%3EORIGINATOR_CANCEL%3C%2Fhangup_cause%3E%0A++++%3Changup_cause_q850%3E16%3C%2Fhangup_cause_q850%3E%0A++++%3Cdigits_dialed%3Enone%3C%2Fdigits_dialed%3E%0A++++%3Cstart_stamp%3E2019-06-12%252009%253A46%253A28%3C%2Fstart_stamp%3E%0A++++%3Cprofile_start_stamp%3E2019-06-12%252009%253A46%253A29%3C%2Fprofile_start_stamp%3E%0A++++%3Cprogress_media_stamp%3E2019-06-12%252009%253A46%253A29%3C%2Fprogress_media_stamp%3E%0A++++%3Cend_stamp%3E2019-06-12%252009%253A46%253A31%3C%2Fend_stamp%3E%0A++++%3Cstart_epoch%3E1560303988%3C%2Fstart_epoch%3E%0A++++%3Cstart_uepoch%3E1560303988996266%3C%2Fstart_uepoch%3E%0A++++%3Cprofile_start_epoch%3E1560303989%3C%2Fprofile_start_epoch%3E%0A++++%3Cprofile_start_uepoch%3E1560303989016266%3C%2Fprofile_start_uepoch%3E%0A++++%3Canswer_epoch%3E0%3C%2Fanswer_epoch%3E%0A++++%3Canswer_uepoch%3E0%3C%2Fanswer_uepoch%3E%0A++++%3Cbridge_epoch%3E0%3C%2Fbridge_epoch%3E%0A++++%3Cbridge_uepoch%3E0%3C%2Fbridge_uepoch%3E%0A++++%3Clast_hold_epoch%3E0%3C%2Flast_hold_epoch%3E%0A++++%3Clast_hold_uepoch%3E0%3C%2Flast_hold_uepoch%3E%0A++++%3Chold_accum_seconds%3E0%3C%2Fhold_accum_seconds%3E%0A++++%3Chold_accum_usec%3E0%3C%2Fhold_accum_usec%3E%0A++++%3Chold_accum_ms%3E0%3C%2Fhold_accum_ms%3E%0A++++%3Cresurrect_epoch%3E0%3C%2Fresurrect_epoch%3E%0A++++%3Cresurrect_uepoch%3E0%3C%2Fresurrect_uepoch%3E%0A++++%3Cprogress_epoch%3E0%3C%2Fprogress_epoch%3E%0A++++%3Cprogress_uepoch%3E0%3C%2Fprogress_uepoch%3E%0A++++%3Cprogress_media_epoch%3E1560303989%3C%2Fprogress_media_epoch%3E%0A++++%3Cprogress_media_uepoch%3E1560303989016266%3C%2Fprogress_media_uepoch%3E%0A++++%3Cend_epoch%3E1560303991%3C%2Fend_epoch%3E%0A++++%3Cend_uepoch%3E1560303991096270%3C%2Fend_uepoch%3E%0A++++%3Clast_app%3Ebridge%3C%2Flast_app%3E%0A++++%3Clast_arg%3Esofia%2Fgateway%2Favaya%2F915121007938%3C%2Flast_arg%3E%0A++++%3Ccaller_id%3E%2522Gong%2Cbaicheng%2522%2520%253Canonymous%253E%3C%2Fcaller_id%3E%0A++++%3Cduration%3E3%3C%2Fduration%3E%0A++++%3Cbillsec%3E0%3C%2Fbillsec%3E%0A++++%3Cprogresssec%3E0%3C%2Fprogresssec%3E%0A++++%3Canswersec%3E0%3C%2Fanswersec%3E%0A++++%3Cwaitsec%3E0%3C%2Fwaitsec%3E%0A++++%3Cprogress_mediasec%3E1%3C%2Fprogress_mediasec%3E%0A++++%3Cflow_billsec%3E0%3C%2Fflow_billsec%3E%0A++++%3Cmduration%3E2100%3C%2Fmduration%3E%0A++++%3Cbillmsec%3E0%3C%2Fbillmsec%3E%0A++++%3Cprogressmsec%3E0%3C%2Fprogressmsec%3E%0A++++%3Canswermsec%3E0%3C%2Fanswermsec%3E%0A++++%3Cwaitmsec%3E0%3C%2Fwaitmsec%3E%0A++++%3Cprogress_mediamsec%3E20%3C%2Fprogress_mediamsec%3E%0A++++%3Cflow_billmsec%3E0%3C%2Fflow_billmsec%3E%0A++++%3Cuduration%3E2100004%3C%2Fuduration%3E%0A++++%3Cbillusec%3E0%3C%2Fbillusec%3E%0A++++%3Cprogressusec%3E0%3C%2Fprogressusec%3E%0A++++%3Canswerusec%3E0%3C%2Fanswerusec%3E%0A++++%3Cwaitusec%3E0%3C%2Fwaitusec%3E%0A++++%3Cprogress_mediausec%3E20000%3C%2Fprogress_mediausec%3E%0A++++%3Cflow_billusec%3E0%3C%2Fflow_billusec%3E%0A++++%3Crtp_audio_in_raw_bytes%3E17200%3C%2Frtp_audio_in_raw_bytes%3E%0A++++%3Crtp_audio_in_media_bytes%3E17200%3C%2Frtp_audio_in_media_bytes%3E%0A++++%3Crtp_audio_in_packet_count%3E100%3C%2Frtp_audio_in_packet_count%3E%0A++++%3Crtp_audio_in_media_packet_count%3E100%3C%2Frtp_audio_in_media_packet_count%3E%0A++++%3Crtp_audio_in_skip_packet_count%3E4%3C%2Frtp_audio_in_skip_packet_count%3E%0A++++%3Crtp_audio_in_jitter_packet_count%3E0%3C%2Frtp_audio_in_jitter_packet_count%3E%0A++++%3Crtp_audio_in_dtmf_packet_count%3E0%3C%2Frtp_audio_in_dtmf_packet_count%3E%0A++++%3Crtp_audio_in_cng_packet_count%3E0%3C%2Frtp_audio_in_cng_packet_count%3E%0A++++%3Crtp_audio_in_flush_packet_count%3E0%3C%2Frtp_audio_in_flush_packet_count%3E%0A++++%3Crtp_audio_in_largest_jb_size%3E0%3C%2Frtp_audio_in_largest_jb_size%3E%0A++++%3Crtp_audio_in_jitter_min_variance%3E6.24%3C%2Frtp_audio_in_jitter_min_variance%3E%0A++++%3Crtp_audio_in_jitter_max_variance%3E400.00%3C%2Frtp_audio_in_jitter_max_variance%3E%0A++++%3Crtp_audio_in_jitter_loss_rate%3E0.00%3C%2Frtp_audio_in_jitter_loss_rate%3E%0A++++%3Crtp_audio_in_jitter_burst_rate%3E0.00%3C%2Frtp_audio_in_jitter_burst_rate%3E%0A++++%3Crtp_audio_in_mean_interval%3E20.00%3C%2Frtp_audio_in_mean_interval%3E%0A++++%3Crtp_audio_in_flaw_total%3E0%3C%2Frtp_audio_in_flaw_total%3E%0A++++%3Crtp_audio_in_quality_percentage%3E100.00%3C%2Frtp_audio_in_quality_percentage%3E%0A++++%3Crtp_audio_in_mos%3E4.50%3C%2Frtp_audio_in_mos%3E%0A++++%3Crtp_audio_out_raw_bytes%3E0%3C%2Frtp_audio_out_raw_bytes%3E%0A++++%3Crtp_audio_out_media_bytes%3E0%3C%2Frtp_audio_out_media_bytes%3E%0A++++%3Crtp_audio_out_packet_count%3E0%3C%2Frtp_audio_out_packet_count%3E%0A++++%3Crtp_audio_out_media_packet_count%3E0%3C%2Frtp_audio_out_media_packet_count%3E%0A++++%3Crtp_audio_out_skip_packet_count%3E0%3C%2Frtp_audio_out_skip_packet_count%3E%0A++++%3Crtp_audio_out_dtmf_packet_count%3E0%3C%2Frtp_audio_out_dtmf_packet_count%3E%0A++++%3Crtp_audio_out_cng_packet_count%3E0%3C%2Frtp_audio_out_cng_packet_count%3E%0A++++%3Crtp_audio_rtcp_packet_count%3E0%3C%2Frtp_audio_rtcp_packet_count%3E%0A++++%3Crtp_audio_rtcp_octet_count%3E0%3C%2Frtp_audio_rtcp_octet_count%3E%0A++%3C%2Fvariables%3E%0A++%3Capp_log%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22callee%3D7010%22+app_stamp%3D%221560303989023546%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22callee%3D7010%22+app_stamp%3D%221560303989024156%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22RECORD_STEREO%3Dtrue%22+app_stamp%3D%221560303989024995%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22record_session%22+app_data%3D%22http%3A%2F%2F%28file%3D2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0.wav%2Cname%3D2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0.wav%29172.16.2.253%3A8282%2Ffileupload%3Fpath%3D2019%2F06%2F12%2F09%22+app_stamp%3D%221560303989031267%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22transfer%22+app_data%3D%22915121007938+xml+default%22+app_stamp%3D%221560303989033512%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22callee%3D915121007938%22+app_stamp%3D%221560303989054478%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22callee%3D915121007938%22+app_stamp%3D%221560303989055204%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22sip_h_caller%3Danonymous%22+app_stamp%3D%221560303989056234%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22sip_h_callee%3D915121007938%22+app_stamp%3D%221560303989057033%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22sip_h_ocallId%3D2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0%22+app_stamp%3D%221560303989057976%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22da%3Dtrue%22+app_stamp%3D%221560303989058989%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22effective_caller_id_number%3Danonymous%22+app_stamp%3D%221560303989059975%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22callerDomain%3Dwilcom.com.cn%22+app_stamp%3D%221560303989060931%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22export%22+app_data%3D%22callerDomain%3Dwilcom.com.cn%22+app_stamp%3D%221560303989061747%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22call_timeout%3D60%22+app_stamp%3D%221560303989062637%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22gateway%3Davaya%22+app_stamp%3D%221560303989063660%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22record_rate%3D8000%22+app_stamp%3D%221560303989064638%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22record_sample_rate%3D8000%22+app_stamp%3D%221560303989065404%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22recording_follow_transfer%3Dtrue%22+app_stamp%3D%221560303989066204%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22record_append%3Dtrue%22+app_stamp%3D%221560303989067048%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22set%22+app_data%3D%22answered_time%3D%22+app_stamp%3D%221560303989067868%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22record_session%22+app_data%3D%22http%3A%2F%2F%28file%3D2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0.wav%2Cname%3D2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0.wav%29172.16.2.253%3A8282%2Ffileupload%3Fpath%3D2019%2F06%2F12%2F09%22+app_stamp%3D%221560303989068777%22%3E%3C%2Fapplication%3E%0A++++%3Capplication+app_name%3D%22bridge%22+app_data%3D%22sofia%2Fgateway%2Favaya%2F915121007938%22+app_stamp%3D%221560303989069642%22%3E%3C%2Fapplication%3E%0A++%3C%2Fapp_log%3E%0A++%3Ccallflow+dialplan%3D%22xml%22+unique-id%3D%2240d041fb-cb63-462e-9c10-650c5e1eb564%22+clone-of%3D%222ac0d366-86a5-4766-bb11-c1e8a462b6ab%22+profile_index%3D%222%22%3E%0A++++%3Cextension+name%3D%22Gateway_Extension%22+number%3D%22915121007938%22%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22callee%3D915121007938%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22callee%3D915121007938%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22sip_h_caller%3Danonymous%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22sip_h_callee%3D915121007938%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22sip_h_ocallId%3D%24%7Buuid%7D%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22da%3Dtrue%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22effective_caller_id_number%3Danonymous%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22callerDomain%3Dwilcom.com.cn%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22callerDomain%3Dwilcom.com.cn%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22call_timeout%3D60%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22gateway%3Davaya%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22record_rate%3D8000%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22record_sample_rate%3D8000%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22recording_follow_transfer%3Dtrue%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22record_append%3Dtrue%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22answered_time%3D%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22record_session%22+app_data%3D%22http%3A%2F%2F%28file%3D%24%7Buuid%7D.wav%2Cname%3D%24%7Buuid%7D.wav%29172.16.2.253%3A8282%2Ffileupload%3Fpath%3D%24%7Bstrftime%28%25Y%2F%25m%2F%25d%2F%25H%29%7D%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22bridge%22+app_data%3D%22sofia%2Fgateway%2Favaya%2F915121007938%22%3E%3C%2Fapplication%3E%0A++++%3C%2Fextension%3E%0A++++%3Ccaller_profile%3E%0A++++++%3Cusername%3Eanonymous%3C%2Fusername%3E%0A++++++%3Cdialplan%3Exml%3C%2Fdialplan%3E%0A++++++%3Ccaller_id_name%3EGong%2Cbaicheng%3C%2Fcaller_id_name%3E%0A++++++%3Ccaller_id_number%3Eanonymous%3C%2Fcaller_id_number%3E%0A++++++%3Ccallee_id_name%3E%3C%2Fcallee_id_name%3E%0A++++++%3Ccallee_id_number%3E%3C%2Fcallee_id_number%3E%0A++++++%3Cani%3Eanonymous%3C%2Fani%3E%0A++++++%3Caniii%3E%3C%2Faniii%3E%0A++++++%3Cnetwork_addr%3E172.16.0.20%3C%2Fnetwork_addr%3E%0A++++++%3Crdnis%3E7010%3C%2Frdnis%3E%0A++++++%3Cdestination_number%3E915121007938%3C%2Fdestination_number%3E%0A++++++%3Cuuid%3E2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0%3C%2Fuuid%3E%0A++++++%3Csource%3Emod_sofia%3C%2Fsource%3E%0A++++++%3Ctransfer_source%3E1560303989%3A40d041fb-cb63-462e-9c10-650c5e1eb564%3Abl_xfer%3A915121007938%2Fdefault%2Fxml%3C%2Ftransfer_source%3E%0A++++++%3Ccontext%3Edefault%3C%2Fcontext%3E%0A++++++%3Cchan_name%3Esofia%2Finternal%2Fanonymous%40wilcom.com.cn%3C%2Fchan_name%3E%0A++++++%3Corigination%3E%0A++++++++%3Corigination_caller_profile%3E%0A++++++++++%3Cusername%3Eanonymous%3C%2Fusername%3E%0A++++++++++%3Cdialplan%3Exml%3C%2Fdialplan%3E%0A++++++++++%3Ccaller_id_name%3EGong%2Cbaicheng%3C%2Fcaller_id_name%3E%0A++++++++++%3Ccaller_id_number%3Eanonymous%3C%2Fcaller_id_number%3E%0A++++++++++%3Ccallee_id_name%3EOutbound+Call%3C%2Fcallee_id_name%3E%0A++++++++++%3Ccallee_id_number%3E915121007938%3C%2Fcallee_id_number%3E%0A++++++++++%3Cani%3Eanonymous%3C%2Fani%3E%0A++++++++++%3Caniii%3E%3C%2Faniii%3E%0A++++++++++%3Cnetwork_addr%3E172.16.0.20%3C%2Fnetwork_addr%3E%0A++++++++++%3Crdnis%3E7010%3C%2Frdnis%3E%0A++++++++++%3Cdestination_number%3E915121007938%3C%2Fdestination_number%3E%0A++++++++++%3Cuuid%3E49c3f50e-2aa1-4ce9-961f-38b85413a72e%3C%2Fuuid%3E%0A++++++++++%3Csource%3Emod_sofia%3C%2Fsource%3E%0A++++++++++%3Ccontext%3Edefault%3C%2Fcontext%3E%0A++++++++++%3Cchan_name%3Esofia%2Fexternal%2F915121007938%3C%2Fchan_name%3E%0A++++++++%3C%2Forigination_caller_profile%3E%0A++++++%3C%2Forigination%3E%0A++++%3C%2Fcaller_profile%3E%0A++++%3Ctimes%3E%0A++++++%3Ccreated_time%3E1560303988996266%3C%2Fcreated_time%3E%0A++++++%3Cprofile_created_time%3E1560303989016266%3C%2Fprofile_created_time%3E%0A++++++%3Cprogress_time%3E0%3C%2Fprogress_time%3E%0A++++++%3Cprogress_media_time%3E1560303989016266%3C%2Fprogress_media_time%3E%0A++++++%3Canswered_time%3E0%3C%2Fanswered_time%3E%0A++++++%3Cbridged_time%3E0%3C%2Fbridged_time%3E%0A++++++%3Clast_hold_time%3E0%3C%2Flast_hold_time%3E%0A++++++%3Chold_accum_time%3E0%3C%2Fhold_accum_time%3E%0A++++++%3Changup_time%3E1560303991096270%3C%2Fhangup_time%3E%0A++++++%3Cresurrect_time%3E0%3C%2Fresurrect_time%3E%0A++++++%3Ctransfer_time%3E0%3C%2Ftransfer_time%3E%0A++++%3C%2Ftimes%3E%0A++%3C%2Fcallflow%3E%0A++%3Ccallflow+dialplan%3D%22XML%22+unique-id%3D%222ac0d366-86a5-4766-bb11-c1e8a462b6ab%22+profile_index%3D%221%22%3E%0A++++%3Cextension+name%3D%22Local_Extension%22+number%3D%227010%22%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22callee%3D7010%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22export%22+app_data%3D%22callee%3D7010%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22set%22+app_data%3D%22RECORD_STEREO%3Dtrue%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22record_session%22+app_data%3D%22http%3A%2F%2F%28file%3D%24%7Buuid%7D.wav%2Cname%3D%24%7Buuid%7D.wav%29172.16.2.253%3A8282%2Ffileupload%3Fpath%3D%24%7Bstrftime%28%25Y%2F%25m%2F%25d%2F%25H%29%7D%22%3E%3C%2Fapplication%3E%0A++++++%3Capplication+app_name%3D%22transfer%22+app_data%3D%22915121007938+xml+default%22%3E%3C%2Fapplication%3E%0A++++%3C%2Fextension%3E%0A++++%3Ccaller_profile%3E%0A++++++%3Cusername%3Eanonymous%3C%2Fusername%3E%0A++++++%3Cdialplan%3EXML%3C%2Fdialplan%3E%0A++++++%3Ccaller_id_name%3EGong%2Cbaicheng%3C%2Fcaller_id_name%3E%0A++++++%3Ccaller_id_number%3Eanonymous%3C%2Fcaller_id_number%3E%0A++++++%3Ccallee_id_name%3E%3C%2Fcallee_id_name%3E%0A++++++%3Ccallee_id_number%3E%3C%2Fcallee_id_number%3E%0A++++++%3Cani%3Eanonymous%3C%2Fani%3E%0A++++++%3Caniii%3E%3C%2Faniii%3E%0A++++++%3Cnetwork_addr%3E172.16.0.20%3C%2Fnetwork_addr%3E%0A++++++%3Crdnis%3E%3C%2Frdnis%3E%0A++++++%3Cdestination_number%3E7010%3C%2Fdestination_number%3E%0A++++++%3Cuuid%3E2f33d98b-f90d-4e1d-9db0-e6981d8f0fa0%3C%2Fuuid%3E%0A++++++%3Csource%3Emod_sofia%3C%2Fsource%3E%0A++++++%3Ccontext%3Epublic%3C%2Fcontext%3E%0A++++++%3Cchan_name%3Esofia%2Finternal%2Fanonymous%40wilcom.com.cn%3C%2Fchan_name%3E%0A++++%3C%2Fcaller_profile%3E%0A++++%3Ctimes%3E%0A++++++%3Ccreated_time%3E1560303988996266%3C%2Fcreated_time%3E%0A++++++%3Cprofile_created_time%3E1560303988996266%3C%2Fprofile_created_time%3E%0A++++++%3Cprogress_time%3E0%3C%2Fprogress_time%3E%0A++++++%3Cprogress_media_time%3E1560303989016266%3C%2Fprogress_media_time%3E%0A++++++%3Canswered_time%3E0%3C%2Fanswered_time%3E%0A++++++%3Cbridged_time%3E0%3C%2Fbridged_time%3E%0A++++++%3Clast_hold_time%3E0%3C%2Flast_hold_time%3E%0A++++++%3Chold_accum_time%3E0%3C%2Fhold_accum_time%3E%0A++++++%3Changup_time%3E0%3C%2Fhangup_time%3E%0A++++++%3Cresurrect_time%3E0%3C%2Fresurrect_time%3E%0A++++++%3Ctransfer_time%3E1560303989016266%3C%2Ftransfer_time%3E%0A++++%3C%2Ftimes%3E%0A++%3C%2Fcallflow%3E%0A%3C%2Fcdr%3E%0A";

    /**
     * <p>parse.</p>
     *
     * @throws link.thingscloud.freeswitch.cdr.exception.ParserException if any.
     */
    @Test
    public void parse() throws ParserException {
        int times = 1;
        long start = System.nanoTime();
        for (int i = 0; i < times; i++) {
            doParse();
        }
        long end = System.nanoTime();
        System.out.println("total : " + (end - start) + " ns" + ", " + (end - start) / 1000000 + " ms");
        System.out.println("per   : " + (end - start) / times + " ns" + ", " + (end - start) / 1000000 / times + " ms");
    }

    private void doParse() throws ParserException {
        Cdr cdr = CdrParser.decodeThenParse(encodeStr);
        System.out.println(JSON.toJSONString(cdr, true));
    }

}
